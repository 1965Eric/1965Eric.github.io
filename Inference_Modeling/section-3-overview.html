<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Section 3 Overview | Data Science Inference and Modeling</title>
  <meta name="description" content="4 Section 3 Overview | Data Science Inference and Modeling" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Section 3 Overview | Data Science Inference and Modeling" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Section 3 Overview | Data Science Inference and Modeling" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="section-2-overview.html"/>
<link rel="next" href="section-4-overview.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="learning-objectives.html"><a href="learning-objectives.html"><i class="fa fa-check"></i><b>1</b> Learning Objectives</a>
<ul>
<li class="chapter" data-level="1.1" data-path="learning-objectives.html"><a href="learning-objectives.html#course-overview"><i class="fa fa-check"></i><b>1.1</b> Course Overview</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="learning-objectives.html"><a href="learning-objectives.html#section-1-parameters-and-estimates"><i class="fa fa-check"></i><b>1.1.1</b> Section 1: Parameters and Estimates</a></li>
<li class="chapter" data-level="1.1.2" data-path="learning-objectives.html"><a href="learning-objectives.html#section-2-the-central-limit-theorem-in-practice"><i class="fa fa-check"></i><b>1.1.2</b> Section 2: The Central Limit Theorem in Practice</a></li>
<li class="chapter" data-level="1.1.3" data-path="learning-objectives.html"><a href="learning-objectives.html#section-3-confidence-intervals-and-p-values"><i class="fa fa-check"></i><b>1.1.3</b> Section 3: Confidence Intervals and p-Values</a></li>
<li class="chapter" data-level="1.1.4" data-path="learning-objectives.html"><a href="learning-objectives.html#section-4-statistical-models"><i class="fa fa-check"></i><b>1.1.4</b> Section 4: Statistical Models</a></li>
<li class="chapter" data-level="1.1.5" data-path="learning-objectives.html"><a href="learning-objectives.html#section-5-bayesian-statistics"><i class="fa fa-check"></i><b>1.1.5</b> Section 5: Bayesian Statistics</a></li>
<li class="chapter" data-level="1.1.6" data-path="learning-objectives.html"><a href="learning-objectives.html#section-6-election-forecasting"><i class="fa fa-check"></i><b>1.1.6</b> Section 6: Election Forecasting</a></li>
<li class="chapter" data-level="1.1.7" data-path="learning-objectives.html"><a href="learning-objectives.html#section-7-association-tests"><i class="fa fa-check"></i><b>1.1.7</b> Section 7: Association Tests</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="learning-objectives.html"><a href="learning-objectives.html#introduction-to-inference"><i class="fa fa-check"></i><b>1.2</b> Introduction to Inference</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="section-1-overview.html"><a href="section-1-overview.html"><i class="fa fa-check"></i><b>2</b> Section 1 Overview</a>
<ul>
<li class="chapter" data-level="2.1" data-path="section-1-overview.html"><a href="section-1-overview.html#sampling-model-parameters-and-estimates"><i class="fa fa-check"></i><b>2.1</b> Sampling Model Parameters and Estimates</a></li>
<li class="chapter" data-level="2.2" data-path="section-1-overview.html"><a href="section-1-overview.html#the-sample-average"><i class="fa fa-check"></i><b>2.2</b> The Sample Average</a></li>
<li class="chapter" data-level="2.3" data-path="section-1-overview.html"><a href="section-1-overview.html#polling-versus-forecasting"><i class="fa fa-check"></i><b>2.3</b> Polling versus Forecasting</a></li>
<li class="chapter" data-level="2.4" data-path="section-1-overview.html"><a href="section-1-overview.html#properties-of-our-estimate"><i class="fa fa-check"></i><b>2.4</b> Properties of Our Estimate</a></li>
<li class="chapter" data-level="2.5" data-path="section-1-overview.html"><a href="section-1-overview.html#assessment---parameters-and-estimates"><i class="fa fa-check"></i><b>2.5</b> Assessment - Parameters and Estimates</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="section-2-overview.html"><a href="section-2-overview.html"><i class="fa fa-check"></i><b>3</b> Section 2 Overview</a>
<ul>
<li class="chapter" data-level="3.1" data-path="section-2-overview.html"><a href="section-2-overview.html#the-central-limit-theorem-in-practice"><i class="fa fa-check"></i><b>3.1</b> The Central Limit Theorem in Practice</a></li>
<li class="chapter" data-level="3.2" data-path="section-2-overview.html"><a href="section-2-overview.html#margin-of-error"><i class="fa fa-check"></i><b>3.2</b> Margin of Error</a></li>
<li class="chapter" data-level="3.3" data-path="section-2-overview.html"><a href="section-2-overview.html#a-monte-carlo-simulation-for-the-clt"><i class="fa fa-check"></i><b>3.3</b> A Monte Carlo Simulation for the CLT</a></li>
<li class="chapter" data-level="3.4" data-path="section-2-overview.html"><a href="section-2-overview.html#the-spread"><i class="fa fa-check"></i><b>3.4</b> The Spread</a></li>
<li class="chapter" data-level="3.5" data-path="section-2-overview.html"><a href="section-2-overview.html#bias-why-not-run-a-very-large-poll"><i class="fa fa-check"></i><b>3.5</b> Bias: Why Not Run a Very Large Poll?</a></li>
<li class="chapter" data-level="3.6" data-path="section-2-overview.html"><a href="section-2-overview.html#assessment---introduction-to-inference"><i class="fa fa-check"></i><b>3.6</b> Assessment - Introduction to Inference</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="section-3-overview.html"><a href="section-3-overview.html"><i class="fa fa-check"></i><b>4</b> Section 3 Overview</a>
<ul>
<li class="chapter" data-level="4.1" data-path="section-3-overview.html"><a href="section-3-overview.html#confidence-intervals"><i class="fa fa-check"></i><b>4.1</b> Confidence Intervals</a></li>
<li class="chapter" data-level="4.2" data-path="section-3-overview.html"><a href="section-3-overview.html#a-monte-carlo-simulation-for-confidence-intervals"><i class="fa fa-check"></i><b>4.2</b> A Monte Carlo Simulation for Confidence Intervals</a></li>
<li class="chapter" data-level="4.3" data-path="section-3-overview.html"><a href="section-3-overview.html#the-correct-language"><i class="fa fa-check"></i><b>4.3</b> The Correct Language</a></li>
<li class="chapter" data-level="4.4" data-path="section-3-overview.html"><a href="section-3-overview.html#power"><i class="fa fa-check"></i><b>4.4</b> Power</a></li>
<li class="chapter" data-level="4.5" data-path="section-3-overview.html"><a href="section-3-overview.html#p-values"><i class="fa fa-check"></i><b>4.5</b> p-Values</a></li>
<li class="chapter" data-level="4.6" data-path="section-3-overview.html"><a href="section-3-overview.html#another-explanation-of-p-values"><i class="fa fa-check"></i><b>4.6</b> Another Explanation of p-Values</a></li>
<li class="chapter" data-level="4.7" data-path="section-3-overview.html"><a href="section-3-overview.html#assessment---confidence-intervals-and-p-values"><i class="fa fa-check"></i><b>4.7</b> Assessment - Confidence Intervals and p-Values</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="section-4-overview.html"><a href="section-4-overview.html"><i class="fa fa-check"></i><b>5</b> Section 4 Overview</a>
<ul>
<li class="chapter" data-level="5.1" data-path="section-4-overview.html"><a href="section-4-overview.html#poll-aggregators"><i class="fa fa-check"></i><b>5.1</b> Poll Aggregators</a></li>
<li class="chapter" data-level="5.2" data-path="section-4-overview.html"><a href="section-4-overview.html#pollsters-and-multilevel-models"><i class="fa fa-check"></i><b>5.2</b> Pollsters and Multilevel Models</a></li>
<li class="chapter" data-level="5.3" data-path="section-4-overview.html"><a href="section-4-overview.html#poll-data-and-pollster-bias"><i class="fa fa-check"></i><b>5.3</b> Poll Data and Pollster Bias</a></li>
<li class="chapter" data-level="5.4" data-path="section-4-overview.html"><a href="section-4-overview.html#data-driven-models"><i class="fa fa-check"></i><b>5.4</b> Data-Driven Models</a></li>
<li class="chapter" data-level="5.5" data-path="section-4-overview.html"><a href="section-4-overview.html#assessment---statistical-models"><i class="fa fa-check"></i><b>5.5</b> Assessment - Statistical Models</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="section-5-overview.html"><a href="section-5-overview.html"><i class="fa fa-check"></i><b>6</b> Section 5 Overview</a>
<ul>
<li class="chapter" data-level="6.1" data-path="section-5-overview.html"><a href="section-5-overview.html#bayesian-statistics"><i class="fa fa-check"></i><b>6.1</b> Bayesian Statistics</a></li>
<li class="chapter" data-level="6.2" data-path="section-5-overview.html"><a href="section-5-overview.html#bayes-theorem"><i class="fa fa-check"></i><b>6.2</b> Bayes’ Theorem</a></li>
<li class="chapter" data-level="6.3" data-path="section-5-overview.html"><a href="section-5-overview.html#bayes-in-practice"><i class="fa fa-check"></i><b>6.3</b> Bayes in Practice</a></li>
<li class="chapter" data-level="6.4" data-path="section-5-overview.html"><a href="section-5-overview.html#the-hierarchical-model"><i class="fa fa-check"></i><b>6.4</b> The Hierarchical Model</a></li>
<li class="chapter" data-level="6.5" data-path="section-5-overview.html"><a href="section-5-overview.html#assessment---bayesian-statistics"><i class="fa fa-check"></i><b>6.5</b> Assessment - Bayesian Statistics</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="section-6-overview.html"><a href="section-6-overview.html"><i class="fa fa-check"></i><b>7</b> Section 6 Overview</a>
<ul>
<li class="chapter" data-level="7.1" data-path="section-6-overview.html"><a href="section-6-overview.html#election-forecasting"><i class="fa fa-check"></i><b>7.1</b> Election Forecasting</a></li>
<li class="chapter" data-level="7.2" data-path="section-6-overview.html"><a href="section-6-overview.html#mathematical-representations-of-models"><i class="fa fa-check"></i><b>7.2</b> Mathematical Representations of Models</a></li>
<li class="chapter" data-level="7.3" data-path="section-6-overview.html"><a href="section-6-overview.html#predicting-the-electoral-college"><i class="fa fa-check"></i><b>7.3</b> Predicting the Electoral College</a></li>
<li class="chapter" data-level="7.4" data-path="section-6-overview.html"><a href="section-6-overview.html#forecasting"><i class="fa fa-check"></i><b>7.4</b> Forecasting</a></li>
<li class="chapter" data-level="7.5" data-path="section-6-overview.html"><a href="section-6-overview.html#assessment---election-forecasting"><i class="fa fa-check"></i><b>7.5</b> Assessment - Election Forecasting</a></li>
<li class="chapter" data-level="7.6" data-path="section-6-overview.html"><a href="section-6-overview.html#the-t-distribution"><i class="fa fa-check"></i><b>7.6</b> The t-Distribution</a></li>
<li class="chapter" data-level="7.7" data-path="section-6-overview.html"><a href="section-6-overview.html#assessment---the-t-distribution"><i class="fa fa-check"></i><b>7.7</b> Assessment - The t-Distribution</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="section-7-overview.html"><a href="section-7-overview.html"><i class="fa fa-check"></i><b>8</b> Section 7 Overview</a>
<ul>
<li class="chapter" data-level="8.1" data-path="section-7-overview.html"><a href="section-7-overview.html#association-tests"><i class="fa fa-check"></i><b>8.1</b> Association Tests</a></li>
<li class="chapter" data-level="8.2" data-path="section-7-overview.html"><a href="section-7-overview.html#chi-squared-tests"><i class="fa fa-check"></i><b>8.2</b> Chi-Squared Tests</a></li>
<li class="chapter" data-level="8.3" data-path="section-7-overview.html"><a href="section-7-overview.html#assessment---association-and-chi-squared-tests"><i class="fa fa-check"></i><b>8.3</b> Assessment - Association and Chi-Squared Tests</a></li>
<li class="chapter" data-level="8.4" data-path="section-7-overview.html"><a href="section-7-overview.html#comprehensive-assessment-brexit"><i class="fa fa-check"></i><b>8.4</b> Comprehensive Assessment: Brexit</a></li>
<li class="chapter" data-level="8.5" data-path="section-7-overview.html"><a href="section-7-overview.html#brexit-poll-analysis---part-1"><i class="fa fa-check"></i><b>8.5</b> Brexit poll analysis - Part 1</a></li>
<li class="chapter" data-level="8.6" data-path="section-7-overview.html"><a href="section-7-overview.html#brexit-poll-analysis---part-2"><i class="fa fa-check"></i><b>8.6</b> Brexit poll analysis - Part 2</a></li>
<li class="chapter" data-level="8.7" data-path="section-7-overview.html"><a href="section-7-overview.html#brexit-poll-analysis---part-3"><i class="fa fa-check"></i><b>8.7</b> Brexit poll analysis - Part 3</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science Inference and Modeling</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="section-3-overview" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Section 3 Overview</h1>
<p>In Section 3, you will look at confidence intervals and p-values.</p>
<p>After completing Section 3, you will be able to:</p>
<ul>
<li>Calculate confidence intervals of difference sizes around an estimate.</li>
<li>Understand that a confidence interval is a random interval with the given probability of falling on top of the parameter.</li>
<li>Explain the concept of “power” as it relates to inference.</li>
<li>Understand the relationship between p-values and confidence intervals and explain why reporting confidence intervals is often preferable.</li>
</ul>
<div id="confidence-intervals" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Confidence Intervals</h2>
<p>The textbook for this section is available <a href="https://rafalab.github.io/dsbook/inference.html#confidence-intervals">here</a></p>
<p><strong>Key points</strong></p>
<ul>
<li>We can use statistical theory to compute the probability that a given interval contains the true parameter <span class="math inline">\(p\)</span>.</li>
<li>95% confidence intervals are intervals constructed to have a 95% chance of including <span class="math inline">\(p\)</span>. The margin of error is approximately a 95% confidence interval.</li>
<li>The start and end of these confidence intervals are random variables.</li>
<li>To calculate any size confidence interval, we need to calculate the value <span class="math inline">\(z\)</span> for which <span class="math inline">\(\mbox{Pr}(-z \le Z \le z)\)</span> equals the desired confidence. For example, a 99% confidence interval requires calculating <span class="math inline">\(z\)</span> for <span class="math inline">\(\mbox{Pr}(-z \le Z \le z) = 0.99\)</span>.</li>
<li>For a confidence interval of size <span class="math inline">\(q\)</span>, we solve for <span class="math inline">\(z = 1 - \frac{1 - q}{2}\)</span>.</li>
<li>To determine a 95% confidence interval, use <code>z &lt;- qnorm(0.975)</code>. This value is slightly smaller than 2 times the standard error.</li>
</ul>
<p><em>Code: geom_smooth confidence interval example</em></p>
<p>The shaded area around the curve is related to the concept of confidence intervals.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="section-3-overview.html#cb30-1" aria-hidden="true"></a><span class="kw">data</span>(<span class="st">&quot;nhtemp&quot;</span>)</span>
<span id="cb30-2"><a href="section-3-overview.html#cb30-2" aria-hidden="true"></a><span class="kw">data.frame</span>(<span class="dt">year =</span> <span class="kw">as.numeric</span>(<span class="kw">time</span>(nhtemp)), <span class="dt">temperature =</span> <span class="kw">as.numeric</span>(nhtemp)) <span class="op">%&gt;%</span></span>
<span id="cb30-3"><a href="section-3-overview.html#cb30-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, temperature)) <span class="op">+</span></span>
<span id="cb30-4"><a href="section-3-overview.html#cb30-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb30-5"><a href="section-3-overview.html#cb30-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_smooth</span>() <span class="op">+</span></span>
<span id="cb30-6"><a href="section-3-overview.html#cb30-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Average Yearly Temperatures in New Haven&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p><em>Code: Monte Carlo simulation of confidence intervals</em></p>
<p>Note that to compute the exact 95% confidence interval, we would use <code>qnorm(.975)*SE_hat</code> instead of <code>2*SE_hat</code>.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="section-3-overview.html#cb32-1" aria-hidden="true"></a>p &lt;-<span class="st"> </span><span class="fl">0.45</span></span>
<span id="cb32-2"><a href="section-3-overview.html#cb32-2" aria-hidden="true"></a>N &lt;-<span class="st"> </span><span class="dv">1000</span></span>
<span id="cb32-3"><a href="section-3-overview.html#cb32-3" aria-hidden="true"></a>X &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="dt">size =</span> N, <span class="dt">replace =</span> <span class="ot">TRUE</span>, <span class="dt">prob =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">-</span>p, p))    <span class="co"># generate N observations</span></span>
<span id="cb32-4"><a href="section-3-overview.html#cb32-4" aria-hidden="true"></a>X_hat &lt;-<span class="st"> </span><span class="kw">mean</span>(X)    <span class="co"># calculate X_hat</span></span>
<span id="cb32-5"><a href="section-3-overview.html#cb32-5" aria-hidden="true"></a>SE_hat &lt;-<span class="st"> </span><span class="kw">sqrt</span>(X_hat<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>X_hat)<span class="op">/</span>N)    <span class="co"># calculate SE_hat, SE of the mean of N observations</span></span>
<span id="cb32-6"><a href="section-3-overview.html#cb32-6" aria-hidden="true"></a><span class="kw">c</span>(X_hat <span class="op">-</span><span class="st"> </span><span class="dv">2</span><span class="op">*</span>SE_hat, X_hat <span class="op">+</span><span class="st"> </span><span class="dv">2</span><span class="op">*</span>SE_hat)    <span class="co"># build interval of 2*SE above and below mean</span></span></code></pre></div>
<pre><code>## [1] 0.414 0.476</code></pre>
<p><em>Code: Solving for <span class="math inline">\(z\)</span> with <code>qnorm</code></em></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="section-3-overview.html#cb34-1" aria-hidden="true"></a>z &lt;-<span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.995</span>)    <span class="co"># calculate z to solve for 99% confidence interval</span></span>
<span id="cb34-2"><a href="section-3-overview.html#cb34-2" aria-hidden="true"></a><span class="kw">pnorm</span>(<span class="kw">qnorm</span>(<span class="fl">0.995</span>))    <span class="co"># demonstrating that qnorm gives the z value for a given probability</span></span></code></pre></div>
<pre><code>## [1] 0.995</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="section-3-overview.html#cb36-1" aria-hidden="true"></a><span class="kw">pnorm</span>(<span class="kw">qnorm</span>(<span class="dv">1</span><span class="fl">-0.995</span>))    <span class="co"># demonstrating symmetry of 1-qnorm</span></span></code></pre></div>
<pre><code>## [1] 0.005</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="section-3-overview.html#cb38-1" aria-hidden="true"></a><span class="kw">pnorm</span>(z) <span class="op">-</span><span class="st"> </span><span class="kw">pnorm</span>(<span class="op">-</span>z)    <span class="co"># demonstrating that this z value gives correct probability for interval</span></span></code></pre></div>
<pre><code>## [1] 0.99</code></pre>
</div>
<div id="a-monte-carlo-simulation-for-confidence-intervals" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> A Monte Carlo Simulation for Confidence Intervals</h2>
<p>The textbook for this section is available <a href="https://rafalab.github.io/dsbook/inference.html#a-monte-carlo-simulation-1">here</a></p>
<p><strong>Key points</strong></p>
<ul>
<li>We can run a Monte Carlo simulation to confirm that a 95% confidence interval contains the true value of <span class="math inline">\(p\)</span> 95% of the time.</li>
<li>A plot of confidence intervals from this simulation demonstrates that most intervals include <span class="math inline">\(p\)</span>, but roughly 5% of intervals miss the true value of <span class="math inline">\(p\)</span>.</li>
</ul>
<p><em>Code: Monte Carlo simulation</em></p>
<p>Note that to compute the exact 95% confidence interval, we would use <code>qnorm(.975)*SE_hat</code> instead of <code>2*SE_hat</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="section-3-overview.html#cb40-1" aria-hidden="true"></a>B &lt;-<span class="st"> </span><span class="dv">10000</span></span>
<span id="cb40-2"><a href="section-3-overview.html#cb40-2" aria-hidden="true"></a>inside &lt;-<span class="st"> </span><span class="kw">replicate</span>(B, {</span>
<span id="cb40-3"><a href="section-3-overview.html#cb40-3" aria-hidden="true"></a>    X &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="dt">size =</span> N, <span class="dt">replace =</span> <span class="ot">TRUE</span>, <span class="dt">prob =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">-</span>p, p))</span>
<span id="cb40-4"><a href="section-3-overview.html#cb40-4" aria-hidden="true"></a>    X_hat &lt;-<span class="st"> </span><span class="kw">mean</span>(X)</span>
<span id="cb40-5"><a href="section-3-overview.html#cb40-5" aria-hidden="true"></a>    SE_hat &lt;-<span class="st"> </span><span class="kw">sqrt</span>(X_hat<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>X_hat)<span class="op">/</span>N)</span>
<span id="cb40-6"><a href="section-3-overview.html#cb40-6" aria-hidden="true"></a>    <span class="kw">between</span>(p, X_hat <span class="op">-</span><span class="st"> </span><span class="dv">2</span><span class="op">*</span>SE_hat, X_hat <span class="op">+</span><span class="st"> </span><span class="dv">2</span><span class="op">*</span>SE_hat)    <span class="co"># TRUE if p in confidence interval</span></span>
<span id="cb40-7"><a href="section-3-overview.html#cb40-7" aria-hidden="true"></a>})</span>
<span id="cb40-8"><a href="section-3-overview.html#cb40-8" aria-hidden="true"></a><span class="kw">mean</span>(inside)</span></code></pre></div>
<pre><code>## [1] 0.957</code></pre>
</div>
<div id="the-correct-language" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> The Correct Language</h2>
<p>The textbook for this section is available <a href="https://rafalab.github.io/dsbook/inference.html#the-correct-language">here</a></p>
<p><strong>Key points</strong></p>
<ul>
<li>The 95% confidence intervals are random, but <span class="math inline">\(p\)</span> is not random.</li>
<li>95% refers to the probability that the random interval falls on top of <span class="math inline">\(p\)</span>.</li>
<li>It is technically incorrect to state that <span class="math inline">\(p\)</span> has a 95% chance of being in between two values because that implies <span class="math inline">\(p\)</span> is random.</li>
</ul>
</div>
<div id="power" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Power</h2>
<p>The textbook for this section is available <a href="https://rafalab.github.io/dsbook/inference.html#power">here</a></p>
<p><strong>Key points</strong></p>
<ul>
<li>If we are trying to predict the result of an election, then a confidence interval that includes a spread of 0 (a tie) is not helpful.</li>
<li>A confidence interval that includes a spread of 0 does not imply a close election, it means the sample size is too small.</li>
<li>Power is the probability of detecting an effect when there is a true effect to find. Power increases as sample size increases, because larger sample size means smaller standard error.</li>
</ul>
<p><em>Code: Confidence interval for the spread with sample size of 25</em></p>
<p>Note that to compute the exact 95% confidence interval, we would use <code>c(-qnorm(.975), qnorm(.975))</code> instead of 1.96.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="section-3-overview.html#cb42-1" aria-hidden="true"></a>N &lt;-<span class="st"> </span><span class="dv">25</span></span>
<span id="cb42-2"><a href="section-3-overview.html#cb42-2" aria-hidden="true"></a>X_hat &lt;-<span class="st"> </span><span class="fl">0.48</span></span>
<span id="cb42-3"><a href="section-3-overview.html#cb42-3" aria-hidden="true"></a>(<span class="dv">2</span><span class="op">*</span>X_hat <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="op">+</span><span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">2</span>)<span class="op">*</span><span class="dv">2</span><span class="op">*</span><span class="kw">sqrt</span>(X_hat<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>X_hat)<span class="op">/</span>N)</span></code></pre></div>
<pre><code>## [1] -0.44  0.36</code></pre>
</div>
<div id="p-values" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> p-Values</h2>
<p>The textbook for this section is available <a href="https://rafalab.github.io/dsbook/inference.html#p-values">here</a></p>
<p><strong>Key points</strong></p>
<ul>
<li>The null hypothesis is the hypothesis that there is no effect. In this case, the null hypothesis is that the spread is 0, or <span class="math inline">\(p = 0.5\)</span>.</li>
<li>The p-value is the probability of detecting an effect of a certain size or larger when the null hypothesis is true.</li>
<li>We can convert the probability of seeing an observed value under the null hypothesis into a standard normal random variable. We compute the value of <span class="math inline">\(z\)</span> that corresponds to the observed result, and then use that <span class="math inline">\(z\)</span> to compute the p-value.</li>
<li>If a 95% confidence interval does not include our observed value, then the p-value must be smaller than 0.05.</li>
<li>It is preferable to report confidence intervals instead of p-values, as confidence intervals give information about the size of the estimate and p-values do not.</li>
</ul>
<p><em>Code: Computing a p-value for observed spread of 0.02</em></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="section-3-overview.html#cb44-1" aria-hidden="true"></a>N &lt;-<span class="st"> </span><span class="dv">100</span>    <span class="co"># sample size</span></span>
<span id="cb44-2"><a href="section-3-overview.html#cb44-2" aria-hidden="true"></a>z &lt;-<span class="st"> </span><span class="kw">sqrt</span>(N) <span class="op">*</span><span class="st"> </span><span class="fl">0.02</span><span class="op">/</span><span class="fl">0.5</span>    <span class="co"># spread of 0.02</span></span>
<span id="cb44-3"><a href="section-3-overview.html#cb44-3" aria-hidden="true"></a><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>(<span class="kw">pnorm</span>(z) <span class="op">-</span><span class="st"> </span><span class="kw">pnorm</span>(<span class="op">-</span>z))</span></code></pre></div>
<pre><code>## [1] 0.689</code></pre>
</div>
<div id="another-explanation-of-p-values" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Another Explanation of p-Values</h2>
<p>The p-value is the probability of observing a value as extreme or more extreme than the result given that the null hypothesis is true.</p>
<p>In the context of the normal distribution, this refers to the probability of observing a Z-score whose absolute value is as high or higher than the Z-score of interest.</p>
<p>Suppose we want to find the p-value of an observation 2 standard deviations larger than the mean. This means we are looking for anything with <span class="math inline">\(|z| \ge 2\)</span>.</p>
<p>Graphically, the p-value gives the probability of an observation that’s at least as far away from the mean or further. This plot shows a standard normal distribution (centered at <span class="math inline">\(z = 0\)</span>) with a standard deviation of 1). The shaded tails are the region of the graph that are 2 standard deviations or more away from the mean.</p>
<div class="figure">
<img src="images/normal_distribution.jpg" alt="" />
<p class="caption">Standard normal distribution (centered at z=0 with a standard deviation of 1</p>
</div>
<p>The p-value is the proportion of area under a normal curve that has z-scores as extreme or more extreme than the given value - the tails on this plot of a normal distribution are shaded to show the region corresponding to the p-value.</p>
<p>The right tail can be found with <code>1-pnorm(2)</code>. We want to have both tails, though, because we want to find the probability of any observation as far away from the mean or farther, in either direction. (This is what’s meant by a two-tailed p-value.) Because the distribution is symmetrical, the right and left tails are the same size and we know that our desired value is just <code>2*(1-pnorm(2))</code>.</p>
<p>Recall that, by default, <code>pnorm()</code> gives the CDF for a normal distribution with a mean of <span class="math inline">\(\mu = 0\)</span> and standard deviation of <span class="math inline">\(\sigma = 1\)</span>. To find p-values for a given z-score z in a normal distribution with mean <code>mu</code> and standard deviation <code>sigma</code>, use <code>2*(1-pnorm(z, mu, sigma))</code> instead.</p>
</div>
<div id="assessment---confidence-intervals-and-p-values" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> Assessment - Confidence Intervals and p-Values</h2>
<ol style="list-style-type: decimal">
<li>For the following exercises, we will use actual poll data from the 2016 election.</li>
</ol>
<p>The exercises will contain pre-loaded data from the <code>dslabs</code> package.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="section-3-overview.html#cb46-1" aria-hidden="true"></a><span class="kw">library</span>(dslabs)</span>
<span id="cb46-2"><a href="section-3-overview.html#cb46-2" aria-hidden="true"></a><span class="kw">data</span>(<span class="st">&quot;polls_us_election_2016&quot;</span>)</span></code></pre></div>
<p>We will use all the national polls that ended within a few weeks before the election.</p>
<p>Assume there are only two candidates and construct a 95% confidence interval for the election night proportion <span class="math inline">\(p\)</span>.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="section-3-overview.html#cb47-1" aria-hidden="true"></a><span class="co"># Load the data</span></span>
<span id="cb47-2"><a href="section-3-overview.html#cb47-2" aria-hidden="true"></a><span class="kw">data</span>(polls_us_election_<span class="dv">2016</span>)</span>
<span id="cb47-3"><a href="section-3-overview.html#cb47-3" aria-hidden="true"></a></span>
<span id="cb47-4"><a href="section-3-overview.html#cb47-4" aria-hidden="true"></a><span class="co"># Generate an object `polls` that contains data filtered for polls that ended on or after October 31, 2016 in the United States</span></span>
<span id="cb47-5"><a href="section-3-overview.html#cb47-5" aria-hidden="true"></a>polls &lt;-<span class="st"> </span><span class="kw">filter</span>(polls_us_election_<span class="dv">2016</span>, enddate <span class="op">&gt;=</span><span class="st"> &quot;2016-10-31&quot;</span> <span class="op">&amp;</span><span class="st"> </span>state <span class="op">==</span><span class="st"> &quot;U.S.&quot;</span>)</span>
<span id="cb47-6"><a href="section-3-overview.html#cb47-6" aria-hidden="true"></a></span>
<span id="cb47-7"><a href="section-3-overview.html#cb47-7" aria-hidden="true"></a><span class="co"># How many rows does `polls` contain? Print this value to the console.</span></span>
<span id="cb47-8"><a href="section-3-overview.html#cb47-8" aria-hidden="true"></a><span class="kw">nrow</span>(polls)</span></code></pre></div>
<pre><code>## [1] 70</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="section-3-overview.html#cb49-1" aria-hidden="true"></a><span class="co"># Assign the sample size of the first poll in `polls` to a variable called `N`. Print this value to the console.</span></span>
<span id="cb49-2"><a href="section-3-overview.html#cb49-2" aria-hidden="true"></a>N &lt;-<span class="st"> </span><span class="kw">head</span>(polls<span class="op">$</span>samplesize,<span class="dv">1</span>)</span>
<span id="cb49-3"><a href="section-3-overview.html#cb49-3" aria-hidden="true"></a>N</span></code></pre></div>
<pre><code>## [1] 2220</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="section-3-overview.html#cb51-1" aria-hidden="true"></a><span class="co"># For the first poll in `polls`, assign the estimated percentage of Clinton voters to a variable called `X_hat`. Print this value to the console.</span></span>
<span id="cb51-2"><a href="section-3-overview.html#cb51-2" aria-hidden="true"></a>X_hat &lt;-<span class="st"> </span>(<span class="kw">head</span>(polls<span class="op">$</span>rawpoll_clinton,<span class="dv">1</span>)<span class="op">/</span><span class="dv">100</span>)</span>
<span id="cb51-3"><a href="section-3-overview.html#cb51-3" aria-hidden="true"></a>X_hat</span></code></pre></div>
<pre><code>## [1] 0.47</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="section-3-overview.html#cb53-1" aria-hidden="true"></a><span class="co"># Calculate the standard error of `X_hat` and save it to a variable called `se_hat`. Print this value to the console.</span></span>
<span id="cb53-2"><a href="section-3-overview.html#cb53-2" aria-hidden="true"></a>se_hat &lt;-<span class="st"> </span><span class="kw">sqrt</span>(X_hat<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>X_hat)<span class="op">/</span>N)</span>
<span id="cb53-3"><a href="section-3-overview.html#cb53-3" aria-hidden="true"></a>se_hat</span></code></pre></div>
<pre><code>## [1] 0.0106</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="section-3-overview.html#cb55-1" aria-hidden="true"></a><span class="co"># Use `qnorm` to calculate the 95% confidence interval for the proportion of Clinton voters. Save the lower and then the upper confidence interval to a variable called `ci`.</span></span>
<span id="cb55-2"><a href="section-3-overview.html#cb55-2" aria-hidden="true"></a>ci &lt;-<span class="st"> </span><span class="kw">c</span>(X_hat <span class="op">-</span><span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.975</span>)<span class="op">*</span>se_hat, X_hat <span class="op">+</span><span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.975</span>)<span class="op">*</span>se_hat)</span>
<span id="cb55-3"><a href="section-3-overview.html#cb55-3" aria-hidden="true"></a>ci</span></code></pre></div>
<pre><code>## [1] 0.449 0.491</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Create a new object called <code>pollster_results</code> that contains the pollster’s name, the end date of the poll, the proportion of voters who declared a vote for Clinton, the standard error of this estimate, and the lower and upper bounds of the confidence interval for the estimate.</li>
</ol>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="section-3-overview.html#cb57-1" aria-hidden="true"></a><span class="co"># The `polls` object that filtered all the data by date and nation has already been loaded. Examine it using the `head` function.</span></span>
<span id="cb57-2"><a href="section-3-overview.html#cb57-2" aria-hidden="true"></a><span class="kw">head</span>(polls)</span></code></pre></div>
<pre><code>##   state  startdate    enddate                                                   pollster grade samplesize population rawpoll_clinton rawpoll_trump rawpoll_johnson rawpoll_mcmullin
## 1  U.S. 2016-11-03 2016-11-06                                   ABC News/Washington Post    A+       2220         lv              47          43.0            4.00               NA
## 2  U.S. 2016-11-01 2016-11-07                                    Google Consumer Surveys     B      26574         lv              38          35.7            5.46               NA
## 3  U.S. 2016-11-02 2016-11-06                                                      Ipsos    A-       2195         lv              42          39.0            6.00               NA
## 4  U.S. 2016-11-04 2016-11-07                                                     YouGov     B       3677         lv              45          41.0            5.00               NA
## 5  U.S. 2016-11-03 2016-11-06                                           Gravis Marketing    B-      16639         rv              47          43.0            3.00               NA
## 6  U.S. 2016-11-03 2016-11-06 Fox News/Anderson Robbins Research/Shaw &amp; Company Research     A       1295         lv              48          44.0            3.00               NA
##   adjpoll_clinton adjpoll_trump adjpoll_johnson adjpoll_mcmullin
## 1            45.2          41.7            4.63               NA
## 2            43.3          41.2            5.18               NA
## 3            42.0          38.8            6.84               NA
## 4            45.7          40.9            6.07               NA
## 5            46.8          42.3            3.73               NA
## 6            49.0          44.0            3.06               NA</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="section-3-overview.html#cb59-1" aria-hidden="true"></a><span class="co"># Create a new object called `pollster_results` that contains columns for pollster name, end date, X_hat, se_hat, lower confidence interval, and upper confidence interval for each poll.</span></span>
<span id="cb59-2"><a href="section-3-overview.html#cb59-2" aria-hidden="true"></a>polls &lt;-<span class="st"> </span><span class="kw">mutate</span>(polls, <span class="dt">X_hat =</span> polls<span class="op">$</span>rawpoll_clinton<span class="op">/</span><span class="dv">100</span>, <span class="dt">se_hat =</span> <span class="kw">sqrt</span>(X_hat<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>X_hat)<span class="op">/</span>polls<span class="op">$</span>samplesize), <span class="dt">lower =</span> X_hat <span class="op">-</span><span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.975</span>)<span class="op">*</span>se_hat, <span class="dt">upper =</span> X_hat <span class="op">+</span><span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.975</span>)<span class="op">*</span>se_hat)</span>
<span id="cb59-3"><a href="section-3-overview.html#cb59-3" aria-hidden="true"></a>pollster_results &lt;-<span class="st"> </span><span class="kw">select</span>(polls, pollster, enddate, X_hat, se_hat, lower, upper)</span>
<span id="cb59-4"><a href="section-3-overview.html#cb59-4" aria-hidden="true"></a>pollster_results</span></code></pre></div>
<pre><code>##                                                      pollster    enddate X_hat  se_hat lower upper
## 1                                    ABC News/Washington Post 2016-11-06 0.470 0.01059 0.449 0.491
## 2                                     Google Consumer Surveys 2016-11-07 0.380 0.00298 0.374 0.386
## 3                                                       Ipsos 2016-11-06 0.420 0.01053 0.399 0.441
## 4                                                      YouGov 2016-11-07 0.450 0.00820 0.434 0.466
## 5                                            Gravis Marketing 2016-11-06 0.470 0.00387 0.462 0.478
## 6  Fox News/Anderson Robbins Research/Shaw &amp; Company Research 2016-11-06 0.480 0.01388 0.453 0.507
## 7                                     CBS News/New York Times 2016-11-06 0.450 0.01317 0.424 0.476
## 8                                NBC News/Wall Street Journal 2016-11-05 0.440 0.01386 0.413 0.467
## 9                                                    IBD/TIPP 2016-11-07 0.412 0.01479 0.383 0.441
## 10                                           Selzer &amp; Company 2016-11-06 0.440 0.01756 0.406 0.474
## 11                                          Angus Reid Global 2016-11-04 0.480 0.01473 0.451 0.509
## 12                                        Monmouth University 2016-11-06 0.500 0.01828 0.464 0.536
## 13                                             Marist College 2016-11-03 0.440 0.01619 0.408 0.472
## 14                                   The Times-Picayune/Lucid 2016-11-07 0.450 0.00991 0.431 0.469
## 15                                      USC Dornsife/LA Times 2016-11-07 0.436 0.00910 0.418 0.454
## 16                      RKM Research and Communications, Inc. 2016-11-05 0.476 0.01572 0.445 0.507
## 17                                       CVOTER International 2016-11-06 0.489 0.01240 0.465 0.513
## 18                                            Morning Consult 2016-11-05 0.450 0.01292 0.425 0.475
## 19                                               SurveyMonkey 2016-11-06 0.470 0.00188 0.466 0.474
## 20                   Rasmussen Reports/Pulse Opinion Research 2016-11-06 0.450 0.01285 0.425 0.475
## 21                                              Insights West 2016-11-07 0.490 0.01630 0.458 0.522
## 22                                 RAND (American Life Panel) 2016-11-01 0.437 0.01041 0.417 0.457
## 23 Fox News/Anderson Robbins Research/Shaw &amp; Company Research 2016-11-03 0.455 0.01497 0.426 0.484
## 24                                    CBS News/New York Times 2016-11-01 0.450 0.01634 0.418 0.482
## 25                                   ABC News/Washington Post 2016-11-05 0.470 0.01134 0.448 0.492
## 26                                                      Ipsos 2016-11-04 0.430 0.01045 0.410 0.450
## 27                                   ABC News/Washington Post 2016-11-04 0.480 0.01217 0.456 0.504
## 28                                                     YouGov 2016-11-06 0.429 0.00170 0.426 0.432
## 29                                                   IBD/TIPP 2016-11-06 0.407 0.01534 0.377 0.437
## 30                                   ABC News/Washington Post 2016-11-03 0.470 0.01325 0.444 0.496
## 31                                                   IBD/TIPP 2016-11-03 0.444 0.01658 0.412 0.476
## 32                                                   IBD/TIPP 2016-11-05 0.430 0.01648 0.398 0.462
## 33                                   ABC News/Washington Post 2016-11-02 0.470 0.01471 0.441 0.499
## 34                                   ABC News/Washington Post 2016-11-01 0.470 0.01461 0.441 0.499
## 35                                   ABC News/Washington Post 2016-10-31 0.460 0.01450 0.432 0.488
## 36                                                      Ipsos 2016-11-03 0.432 0.01102 0.410 0.454
## 37                                                   IBD/TIPP 2016-11-04 0.442 0.01751 0.408 0.476
## 38                                                     YouGov 2016-11-01 0.460 0.01419 0.432 0.488
## 39                                                   IBD/TIPP 2016-10-31 0.446 0.01558 0.415 0.477
## 40                                                      Ipsos 2016-11-02 0.455 0.01136 0.433 0.477
## 41                   Rasmussen Reports/Pulse Opinion Research 2016-11-03 0.440 0.01282 0.415 0.465
## 42                                   The Times-Picayune/Lucid 2016-11-06 0.450 0.00979 0.431 0.469
## 43                                                      Ipsos 2016-11-01 0.447 0.01181 0.424 0.470
## 44                                                   IBD/TIPP 2016-11-02 0.440 0.01686 0.407 0.473
## 45                                                   IBD/TIPP 2016-11-01 0.440 0.01691 0.407 0.473
## 46                   Rasmussen Reports/Pulse Opinion Research 2016-11-02 0.420 0.01274 0.395 0.445
## 47                                                      Ipsos 2016-10-31 0.440 0.01297 0.415 0.465
## 48                                   The Times-Picayune/Lucid 2016-11-05 0.450 0.00990 0.431 0.469
## 49                   Rasmussen Reports/Pulse Opinion Research 2016-10-31 0.440 0.01282 0.415 0.465
## 50                                    Google Consumer Surveys 2016-10-31 0.377 0.00311 0.371 0.383
## 51                                       CVOTER International 2016-11-05 0.492 0.01261 0.468 0.517
## 52                   Rasmussen Reports/Pulse Opinion Research 2016-11-01 0.440 0.01282 0.415 0.465
## 53                                       CVOTER International 2016-11-04 0.491 0.01300 0.465 0.516
## 54                                   The Times-Picayune/Lucid 2016-11-04 0.450 0.00983 0.431 0.469
## 55                                      USC Dornsife/LA Times 2016-11-06 0.432 0.00914 0.414 0.450
## 56                                       CVOTER International 2016-11-03 0.485 0.01338 0.459 0.512
## 57                                   The Times-Picayune/Lucid 2016-11-03 0.440 0.00968 0.421 0.459
## 58                                      USC Dornsife/LA Times 2016-11-05 0.426 0.00905 0.409 0.444
## 59                                       CVOTER International 2016-11-02 0.488 0.01371 0.461 0.515
## 60                                      USC Dornsife/LA Times 2016-11-04 0.426 0.00905 0.408 0.443
## 61                                       CVOTER International 2016-11-01 0.488 0.01344 0.462 0.514
## 62                                   The Times-Picayune/Lucid 2016-11-02 0.440 0.00970 0.421 0.459
## 63                                           Gravis Marketing 2016-10-31 0.460 0.00681 0.447 0.473
## 64                                      USC Dornsife/LA Times 2016-11-03 0.434 0.00911 0.416 0.452
## 65                                   The Times-Picayune/Lucid 2016-11-01 0.430 0.00968 0.411 0.449
## 66                                      USC Dornsife/LA Times 2016-11-02 0.425 0.00912 0.407 0.443
## 67                                           Gravis Marketing 2016-11-02 0.470 0.01011 0.450 0.490
## 68                                      USC Dornsife/LA Times 2016-11-01 0.424 0.00902 0.406 0.441
## 69                                   The Times-Picayune/Lucid 2016-10-31 0.420 0.00968 0.401 0.439
## 70                                      USC Dornsife/LA Times 2016-10-31 0.433 0.00883 0.415 0.450</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>The final tally for the popular vote was Clinton 48.2% and Trump 46.1%. Add a column called <code>hit</code> to <code>pollster_results</code> that states if the confidence interval included the true proportion <span class="math inline">\(p=0.482\)</span> or not. What proportion of confidence intervals included <span class="math inline">\(p\)</span>?</li>
</ol>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="section-3-overview.html#cb61-1" aria-hidden="true"></a><span class="co"># The `pollster_results` object has already been loaded. Examine it using the `head` function.</span></span>
<span id="cb61-2"><a href="section-3-overview.html#cb61-2" aria-hidden="true"></a><span class="kw">head</span>(pollster_results)</span></code></pre></div>
<pre><code>##                                                     pollster    enddate X_hat  se_hat lower upper
## 1                                   ABC News/Washington Post 2016-11-06  0.47 0.01059 0.449 0.491
## 2                                    Google Consumer Surveys 2016-11-07  0.38 0.00298 0.374 0.386
## 3                                                      Ipsos 2016-11-06  0.42 0.01053 0.399 0.441
## 4                                                     YouGov 2016-11-07  0.45 0.00820 0.434 0.466
## 5                                           Gravis Marketing 2016-11-06  0.47 0.00387 0.462 0.478
## 6 Fox News/Anderson Robbins Research/Shaw &amp; Company Research 2016-11-06  0.48 0.01388 0.453 0.507</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="section-3-overview.html#cb63-1" aria-hidden="true"></a><span class="co"># Add a logical variable called `hit` that indicates whether the actual value exists within the confidence interval of each poll. Summarize the average `hit` result to determine the proportion of polls with confidence intervals include the actual value. Save the result as an object called `avg_hit`.</span></span>
<span id="cb63-2"><a href="section-3-overview.html#cb63-2" aria-hidden="true"></a>avg_hit &lt;-<span class="st"> </span>pollster_results <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">hit=</span>(lower<span class="op">&lt;</span><span class="fl">0.482</span> <span class="op">&amp;</span><span class="st"> </span>upper<span class="op">&gt;</span><span class="fl">0.482</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="kw">mean</span>(hit))</span>
<span id="cb63-3"><a href="section-3-overview.html#cb63-3" aria-hidden="true"></a>avg_hit</span></code></pre></div>
<pre><code>##   mean(hit)
## 1     0.314</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>If these confidence intervals are constructed correctly, and the theory holds up, what proportion of confidence intervals should include <span class="math inline">\(p\)</span>?</li>
</ol>
<ul class="task-list">
<li><input type="checkbox" disabled="" />
A. 0.05</li>
<li><input type="checkbox" disabled="" />
B. 0.31</li>
<li><input type="checkbox" disabled="" />
C. 0.50</li>
<li><input type="checkbox" disabled="" checked="" />
D. 0.95</li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>A much smaller proportion of the polls than expected produce confidence intervals containing <span class="math inline">\(p\)</span>.</li>
</ol>
<p>Notice that most polls that fail to include <span class="math inline">\(p\)</span> are underestimating. The rationale for this is that undecided voters historically divide evenly between the two main candidates on election day.</p>
<p>In this case, it is more informative to estimate the spread or the difference between the proportion of two candidates <span class="math inline">\(d\)</span>, or <span class="math inline">\(0.482 − 0.461 = 0.021\)</span> for this election.</p>
<p>Assume that there are only two parties and that <span class="math inline">\(d = 2p − 1\)</span>. Construct a 95% confidence interval for difference in proportions on election night.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="section-3-overview.html#cb65-1" aria-hidden="true"></a><span class="co"># Add a statement to this line of code that will add a new column named `d_hat` to `polls`. The new column should contain the difference in the proportion of voters.</span></span>
<span id="cb65-2"><a href="section-3-overview.html#cb65-2" aria-hidden="true"></a>polls &lt;-<span class="st"> </span>polls_us_election_<span class="dv">2016</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(enddate <span class="op">&gt;=</span><span class="st"> &quot;2016-10-31&quot;</span> <span class="op">&amp;</span><span class="st"> </span>state <span class="op">==</span><span class="st"> &quot;U.S.&quot;</span>)  <span class="op">%&gt;%</span></span>
<span id="cb65-3"><a href="section-3-overview.html#cb65-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">d_hat =</span> rawpoll_clinton<span class="op">/</span><span class="dv">100</span> <span class="op">-</span><span class="st"> </span>rawpoll_trump<span class="op">/</span><span class="dv">100</span>)</span>
<span id="cb65-4"><a href="section-3-overview.html#cb65-4" aria-hidden="true"></a></span>
<span id="cb65-5"><a href="section-3-overview.html#cb65-5" aria-hidden="true"></a><span class="co"># Assign the sample size of the first poll in `polls` to a variable called `N`. Print this value to the console.</span></span>
<span id="cb65-6"><a href="section-3-overview.html#cb65-6" aria-hidden="true"></a>N &lt;-<span class="st"> </span>polls<span class="op">$</span>samplesize[<span class="dv">1</span>]</span>
<span id="cb65-7"><a href="section-3-overview.html#cb65-7" aria-hidden="true"></a>N</span></code></pre></div>
<pre><code>## [1] 2220</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="section-3-overview.html#cb67-1" aria-hidden="true"></a><span class="co"># Assign the difference `d_hat` of the first poll in `polls` to a variable called `d_hat`. Print this value to the console.</span></span>
<span id="cb67-2"><a href="section-3-overview.html#cb67-2" aria-hidden="true"></a>d_hat &lt;-<span class="st"> </span>polls<span class="op">$</span>d_hat[<span class="dv">1</span>]</span>
<span id="cb67-3"><a href="section-3-overview.html#cb67-3" aria-hidden="true"></a>d_hat</span></code></pre></div>
<pre><code>## [1] 0.04</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="section-3-overview.html#cb69-1" aria-hidden="true"></a><span class="co"># Assign proportion of votes for Clinton to the variable `X_hat`.</span></span>
<span id="cb69-2"><a href="section-3-overview.html#cb69-2" aria-hidden="true"></a>X_hat &lt;-<span class="st"> </span>(d_hat<span class="op">+</span><span class="dv">1</span>)<span class="op">/</span><span class="dv">2</span></span>
<span id="cb69-3"><a href="section-3-overview.html#cb69-3" aria-hidden="true"></a>X_hat</span></code></pre></div>
<pre><code>## [1] 0.52</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="section-3-overview.html#cb71-1" aria-hidden="true"></a><span class="co"># Calculate the standard error of the spread and save it to a variable called `se_hat`. Print this value to the console.</span></span>
<span id="cb71-2"><a href="section-3-overview.html#cb71-2" aria-hidden="true"></a>se_hat &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">*</span><span class="kw">sqrt</span>(X_hat<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>X_hat)<span class="op">/</span>N)</span>
<span id="cb71-3"><a href="section-3-overview.html#cb71-3" aria-hidden="true"></a>se_hat</span></code></pre></div>
<pre><code>## [1] 0.0212</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="section-3-overview.html#cb73-1" aria-hidden="true"></a><span class="co"># Use `qnorm` to calculate the 95% confidence interval for the difference in the proportions of voters. Save the lower and then the upper confidence interval to a variable called `ci`.</span></span>
<span id="cb73-2"><a href="section-3-overview.html#cb73-2" aria-hidden="true"></a>ci &lt;-<span class="st"> </span><span class="kw">c</span>(d_hat <span class="op">-</span><span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.975</span>)<span class="op">*</span>se_hat, d_hat <span class="op">+</span><span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.975</span>)<span class="op">*</span>se_hat)</span>
<span id="cb73-3"><a href="section-3-overview.html#cb73-3" aria-hidden="true"></a>ci</span></code></pre></div>
<pre><code>## [1] -0.00156  0.08156</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Create a new object called <code>pollster_results</code> that contains the pollster’s name, the end date of the poll, the difference in the proportion of voters who declared a vote either, and the lower and upper bounds of the confidence interval for the estimate.</li>
</ol>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="section-3-overview.html#cb75-1" aria-hidden="true"></a><span class="co"># The subset `polls` data with &#39;d_hat&#39; already calculated has been loaded. Examine it using the `head` function.</span></span>
<span id="cb75-2"><a href="section-3-overview.html#cb75-2" aria-hidden="true"></a><span class="kw">head</span>(polls)</span></code></pre></div>
<pre><code>##   state  startdate    enddate                                                   pollster grade samplesize population rawpoll_clinton rawpoll_trump rawpoll_johnson rawpoll_mcmullin
## 1  U.S. 2016-11-03 2016-11-06                                   ABC News/Washington Post    A+       2220         lv              47          43.0            4.00               NA
## 2  U.S. 2016-11-01 2016-11-07                                    Google Consumer Surveys     B      26574         lv              38          35.7            5.46               NA
## 3  U.S. 2016-11-02 2016-11-06                                                      Ipsos    A-       2195         lv              42          39.0            6.00               NA
## 4  U.S. 2016-11-04 2016-11-07                                                     YouGov     B       3677         lv              45          41.0            5.00               NA
## 5  U.S. 2016-11-03 2016-11-06                                           Gravis Marketing    B-      16639         rv              47          43.0            3.00               NA
## 6  U.S. 2016-11-03 2016-11-06 Fox News/Anderson Robbins Research/Shaw &amp; Company Research     A       1295         lv              48          44.0            3.00               NA
##   adjpoll_clinton adjpoll_trump adjpoll_johnson adjpoll_mcmullin  d_hat
## 1            45.2          41.7            4.63               NA 0.0400
## 2            43.3          41.2            5.18               NA 0.0234
## 3            42.0          38.8            6.84               NA 0.0300
## 4            45.7          40.9            6.07               NA 0.0400
## 5            46.8          42.3            3.73               NA 0.0400
## 6            49.0          44.0            3.06               NA 0.0400</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="section-3-overview.html#cb77-1" aria-hidden="true"></a><span class="co"># Create a new object called `pollster_results` that contains columns for pollster name, end date, d_hat, lower confidence interval of d_hat, and upper confidence interval of d_hat for each poll.</span></span>
<span id="cb77-2"><a href="section-3-overview.html#cb77-2" aria-hidden="true"></a>d_hat =<span class="st"> </span>polls<span class="op">$</span>rawpoll_clinton<span class="op">/</span><span class="dv">100</span> <span class="op">-</span><span class="st"> </span>polls<span class="op">$</span>rawpoll_trump<span class="op">/</span><span class="dv">100</span></span>
<span id="cb77-3"><a href="section-3-overview.html#cb77-3" aria-hidden="true"></a>X_hat =<span class="st"> </span>(d_hat <span class="op">+</span><span class="st"> </span><span class="dv">1</span>) <span class="op">/</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb77-4"><a href="section-3-overview.html#cb77-4" aria-hidden="true"></a>polls &lt;-<span class="st"> </span><span class="kw">mutate</span>(polls, X_hat, <span class="dt">se_hat =</span> <span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="kw">sqrt</span>(X_hat <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>X_hat) <span class="op">/</span><span class="st"> </span>samplesize), <span class="dt">lower =</span> d_hat <span class="op">-</span><span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.975</span>)<span class="op">*</span>se_hat, <span class="dt">upper =</span> d_hat <span class="op">+</span><span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.975</span>)<span class="op">*</span>se_hat)</span>
<span id="cb77-5"><a href="section-3-overview.html#cb77-5" aria-hidden="true"></a>pollster_results &lt;-<span class="st"> </span><span class="kw">select</span>(polls, pollster, enddate, d_hat, lower, upper)</span>
<span id="cb77-6"><a href="section-3-overview.html#cb77-6" aria-hidden="true"></a>pollster_results</span></code></pre></div>
<pre><code>##                                                      pollster    enddate   d_hat    lower    upper
## 1                                    ABC News/Washington Post 2016-11-06  0.0400 -0.00156  0.08156
## 2                                     Google Consumer Surveys 2016-11-07  0.0234  0.01138  0.03542
## 3                                                       Ipsos 2016-11-06  0.0300 -0.01182  0.07182
## 4                                                      YouGov 2016-11-07  0.0400  0.00770  0.07230
## 5                                            Gravis Marketing 2016-11-06  0.0400  0.02482  0.05518
## 6  Fox News/Anderson Robbins Research/Shaw &amp; Company Research 2016-11-06  0.0400 -0.01442  0.09442
## 7                                     CBS News/New York Times 2016-11-06  0.0400 -0.01186  0.09186
## 8                                NBC News/Wall Street Journal 2016-11-05  0.0400 -0.01470  0.09470
## 9                                                    IBD/TIPP 2016-11-07 -0.0150 -0.07390  0.04390
## 10                                           Selzer &amp; Company 2016-11-06  0.0300 -0.03931  0.09931
## 11                                          Angus Reid Global 2016-11-04  0.0400 -0.01772  0.09772
## 12                                        Monmouth University 2016-11-06  0.0600 -0.01153  0.13153
## 13                                             Marist College 2016-11-03  0.0100 -0.05392  0.07392
## 14                                   The Times-Picayune/Lucid 2016-11-07  0.0500  0.01101  0.08899
## 15                                      USC Dornsife/LA Times 2016-11-07 -0.0323 -0.06823  0.00363
## 16                      RKM Research and Communications, Inc. 2016-11-05  0.0320 -0.02967  0.09367
## 17                                       CVOTER International 2016-11-06  0.0278 -0.02080  0.07640
## 18                                            Morning Consult 2016-11-05  0.0300 -0.02089  0.08089
## 19                                               SurveyMonkey 2016-11-06  0.0600  0.05262  0.06738
## 20                   Rasmussen Reports/Pulse Opinion Research 2016-11-06  0.0200 -0.03060  0.07060
## 21                                              Insights West 2016-11-07  0.0400 -0.02388  0.10388
## 22                                 RAND (American Life Panel) 2016-11-01  0.0910  0.05002  0.13198
## 23 Fox News/Anderson Robbins Research/Shaw &amp; Company Research 2016-11-03  0.0150 -0.04390  0.07390
## 24                                    CBS News/New York Times 2016-11-01  0.0300 -0.03434  0.09434
## 25                                   ABC News/Washington Post 2016-11-05  0.0400 -0.00450  0.08450
## 26                                                      Ipsos 2016-11-04  0.0400 -0.00134  0.08134
## 27                                   ABC News/Washington Post 2016-11-04  0.0500  0.00231  0.09769
## 28                                                     YouGov 2016-11-06  0.0390  0.03225  0.04575
## 29                                                   IBD/TIPP 2016-11-06 -0.0240 -0.08517  0.03717
## 30                                   ABC News/Washington Post 2016-11-03  0.0400 -0.01199  0.09199
## 31                                                   IBD/TIPP 2016-11-03  0.0050 -0.06040  0.07040
## 32                                                   IBD/TIPP 2016-11-05 -0.0100 -0.07522  0.05522
## 33                                   ABC News/Washington Post 2016-11-02  0.0300 -0.02775  0.08775
## 34                                   ABC News/Washington Post 2016-11-01  0.0200 -0.03736  0.07736
## 35                                   ABC News/Washington Post 2016-10-31  0.0000 -0.05701  0.05701
## 36                                                      Ipsos 2016-11-03  0.0490  0.00545  0.09255
## 37                                                   IBD/TIPP 2016-11-04  0.0050 -0.06412  0.07412
## 38                                                     YouGov 2016-11-01  0.0300 -0.02579  0.08579
## 39                                                   IBD/TIPP 2016-10-31  0.0090 -0.05243  0.07043
## 40                                                      Ipsos 2016-11-02  0.0820  0.03744  0.12656
## 41                   Rasmussen Reports/Pulse Opinion Research 2016-11-03  0.0000 -0.05061  0.05061
## 42                                   The Times-Picayune/Lucid 2016-11-06  0.0500  0.01149  0.08851
## 43                                                      Ipsos 2016-11-01  0.0730  0.02656  0.11944
## 44                                                   IBD/TIPP 2016-11-02 -0.0010 -0.06756  0.06556
## 45                                                   IBD/TIPP 2016-11-01 -0.0040 -0.07076  0.06276
## 46                   Rasmussen Reports/Pulse Opinion Research 2016-11-02 -0.0300 -0.08058  0.02058
## 47                                                      Ipsos 2016-10-31  0.0680  0.01689  0.11911
## 48                                   The Times-Picayune/Lucid 2016-11-05  0.0500  0.01105  0.08895
## 49                   Rasmussen Reports/Pulse Opinion Research 2016-10-31  0.0000 -0.05061  0.05061
## 50                                    Google Consumer Surveys 2016-10-31  0.0262  0.01364  0.03876
## 51                                       CVOTER International 2016-11-05  0.0333 -0.01611  0.08271
## 52                   Rasmussen Reports/Pulse Opinion Research 2016-11-01  0.0000 -0.05061  0.05061
## 53                                       CVOTER International 2016-11-04  0.0124 -0.03856  0.06336
## 54                                   The Times-Picayune/Lucid 2016-11-04  0.0600  0.02134  0.09866
## 55                                      USC Dornsife/LA Times 2016-11-06 -0.0475 -0.08364 -0.01136
## 56                                       CVOTER International 2016-11-03  0.0009 -0.05158  0.05338
## 57                                   The Times-Picayune/Lucid 2016-11-03  0.0500  0.01181  0.08819
## 58                                      USC Dornsife/LA Times 2016-11-05 -0.0553 -0.09110 -0.01950
## 59                                       CVOTER International 2016-11-02  0.0056 -0.04816  0.05936
## 60                                      USC Dornsife/LA Times 2016-11-04 -0.0540 -0.08981 -0.01819
## 61                                       CVOTER International 2016-11-01  0.0067 -0.04600  0.05940
## 62                                   The Times-Picayune/Lucid 2016-11-02  0.0500  0.01176  0.08824
## 63                                           Gravis Marketing 2016-10-31  0.0100 -0.01677  0.03677
## 64                                      USC Dornsife/LA Times 2016-11-03 -0.0351 -0.07109  0.00089
## 65                                   The Times-Picayune/Lucid 2016-11-01  0.0300 -0.00830  0.06830
## 66                                      USC Dornsife/LA Times 2016-11-02 -0.0503 -0.08641 -0.01419
## 67                                           Gravis Marketing 2016-11-02  0.0200 -0.01971  0.05971
## 68                                      USC Dornsife/LA Times 2016-11-01 -0.0547 -0.09041 -0.01899
## 69                                   The Times-Picayune/Lucid 2016-10-31  0.0200 -0.01843  0.05843
## 70                                      USC Dornsife/LA Times 2016-10-31 -0.0362 -0.07113 -0.00127</code></pre>
<ol start="7" style="list-style-type: decimal">
<li>What proportion of confidence intervals for the difference between the proportion of voters included <span class="math inline">\(d\)</span>, the actual difference in election day?</li>
</ol>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="section-3-overview.html#cb79-1" aria-hidden="true"></a><span class="co"># The `pollster_results` object has already been loaded. Examine it using the `head` function.</span></span>
<span id="cb79-2"><a href="section-3-overview.html#cb79-2" aria-hidden="true"></a><span class="kw">head</span>(pollster_results)</span></code></pre></div>
<pre><code>##                                                     pollster    enddate  d_hat    lower  upper
## 1                                   ABC News/Washington Post 2016-11-06 0.0400 -0.00156 0.0816
## 2                                    Google Consumer Surveys 2016-11-07 0.0234  0.01138 0.0354
## 3                                                      Ipsos 2016-11-06 0.0300 -0.01182 0.0718
## 4                                                     YouGov 2016-11-07 0.0400  0.00770 0.0723
## 5                                           Gravis Marketing 2016-11-06 0.0400  0.02482 0.0552
## 6 Fox News/Anderson Robbins Research/Shaw &amp; Company Research 2016-11-06 0.0400 -0.01442 0.0944</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="section-3-overview.html#cb81-1" aria-hidden="true"></a><span class="co"># Add a logical variable called `hit` that indicates whether the actual value (0.021) exists within the confidence interval of each poll. Summarize the average `hit` result to determine the proportion of polls with confidence intervals include the actual value. Save the result as an object called `avg_hit`.</span></span>
<span id="cb81-2"><a href="section-3-overview.html#cb81-2" aria-hidden="true"></a>avg_hit &lt;-<span class="st"> </span>pollster_results <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">hit=</span>(lower<span class="op">&lt;</span><span class="fl">0.021</span> <span class="op">&amp;</span><span class="st"> </span>upper<span class="op">&gt;</span><span class="fl">0.021</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="kw">mean</span>(hit))</span>
<span id="cb81-3"><a href="section-3-overview.html#cb81-3" aria-hidden="true"></a>avg_hit</span></code></pre></div>
<pre><code>##   mean(hit)
## 1     0.771</code></pre>
<ol start="8" style="list-style-type: decimal">
<li>Although the proportion of confidence intervals that include the actual difference between the proportion of voters increases substantially, it is still lower that 0.95.</li>
</ol>
<p>In the next chapter, we learn the reason for this. To motivate our next exercises, calculate the difference between each poll’s estimate <span class="math inline">\(\bar{d}\)</span> and the actual <span class="math inline">\(d = 0.021\)</span>. Stratify this difference, or error, by pollster in a plot.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="section-3-overview.html#cb83-1" aria-hidden="true"></a><span class="co"># The `polls` object has already been loaded. Examine it using the `head` function.</span></span>
<span id="cb83-2"><a href="section-3-overview.html#cb83-2" aria-hidden="true"></a><span class="kw">head</span>(polls)</span></code></pre></div>
<pre><code>##   state  startdate    enddate                                                   pollster grade samplesize population rawpoll_clinton rawpoll_trump rawpoll_johnson rawpoll_mcmullin
## 1  U.S. 2016-11-03 2016-11-06                                   ABC News/Washington Post    A+       2220         lv              47          43.0            4.00               NA
## 2  U.S. 2016-11-01 2016-11-07                                    Google Consumer Surveys     B      26574         lv              38          35.7            5.46               NA
## 3  U.S. 2016-11-02 2016-11-06                                                      Ipsos    A-       2195         lv              42          39.0            6.00               NA
## 4  U.S. 2016-11-04 2016-11-07                                                     YouGov     B       3677         lv              45          41.0            5.00               NA
## 5  U.S. 2016-11-03 2016-11-06                                           Gravis Marketing    B-      16639         rv              47          43.0            3.00               NA
## 6  U.S. 2016-11-03 2016-11-06 Fox News/Anderson Robbins Research/Shaw &amp; Company Research     A       1295         lv              48          44.0            3.00               NA
##   adjpoll_clinton adjpoll_trump adjpoll_johnson adjpoll_mcmullin  d_hat X_hat  se_hat    lower  upper
## 1            45.2          41.7            4.63               NA 0.0400 0.520 0.02121 -0.00156 0.0816
## 2            43.3          41.2            5.18               NA 0.0234 0.512 0.00613  0.01138 0.0354
## 3            42.0          38.8            6.84               NA 0.0300 0.515 0.02133 -0.01182 0.0718
## 4            45.7          40.9            6.07               NA 0.0400 0.520 0.01648  0.00770 0.0723
## 5            46.8          42.3            3.73               NA 0.0400 0.520 0.00775  0.02482 0.0552
## 6            49.0          44.0            3.06               NA 0.0400 0.520 0.02777 -0.01442 0.0944</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="section-3-overview.html#cb85-1" aria-hidden="true"></a><span class="co"># Add variable called `error` to the object `polls` that contains the difference between d_hat and the actual difference on election day. Then make a plot of the error stratified by pollster.</span></span>
<span id="cb85-2"><a href="section-3-overview.html#cb85-2" aria-hidden="true"></a>error &lt;-<span class="st"> </span>polls<span class="op">$</span>d_hat <span class="op">-</span><span class="st"> </span><span class="fl">0.021</span></span>
<span id="cb85-3"><a href="section-3-overview.html#cb85-3" aria-hidden="true"></a>polls &lt;-<span class="st"> </span><span class="kw">mutate</span>(polls, error)</span>
<span id="cb85-4"><a href="section-3-overview.html#cb85-4" aria-hidden="true"></a>polls <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> pollster, <span class="dt">y =</span> error)) <span class="op">+</span></span>
<span id="cb85-5"><a href="section-3-overview.html#cb85-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb85-6"><a href="section-3-overview.html#cb85-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<ol start="9" style="list-style-type: decimal">
<li>Remake the plot you made for the previous exercise, but only for pollsters that took five or more polls.</li>
</ol>
<p>You can use dplyr tools <code>group_by</code> and <code>n</code> to group data by a variable of interest and then count the number of observations in the groups. The function <code>filter</code> filters data piped into it by your specified condition.</p>
<p>For example:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="section-3-overview.html#cb86-1" aria-hidden="true"></a>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(variable_for_grouping) </span>
<span id="cb86-2"><a href="section-3-overview.html#cb86-2" aria-hidden="true"></a>    <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">n</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">5</span>)</span></code></pre></div>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="section-3-overview.html#cb87-1" aria-hidden="true"></a><span class="co"># The `polls` object has already been loaded. Examine it using the `head` function.</span></span>
<span id="cb87-2"><a href="section-3-overview.html#cb87-2" aria-hidden="true"></a><span class="kw">head</span>(polls)</span></code></pre></div>
<pre><code>##   state  startdate    enddate                                                   pollster grade samplesize population rawpoll_clinton rawpoll_trump rawpoll_johnson rawpoll_mcmullin
## 1  U.S. 2016-11-03 2016-11-06                                   ABC News/Washington Post    A+       2220         lv              47          43.0            4.00               NA
## 2  U.S. 2016-11-01 2016-11-07                                    Google Consumer Surveys     B      26574         lv              38          35.7            5.46               NA
## 3  U.S. 2016-11-02 2016-11-06                                                      Ipsos    A-       2195         lv              42          39.0            6.00               NA
## 4  U.S. 2016-11-04 2016-11-07                                                     YouGov     B       3677         lv              45          41.0            5.00               NA
## 5  U.S. 2016-11-03 2016-11-06                                           Gravis Marketing    B-      16639         rv              47          43.0            3.00               NA
## 6  U.S. 2016-11-03 2016-11-06 Fox News/Anderson Robbins Research/Shaw &amp; Company Research     A       1295         lv              48          44.0            3.00               NA
##   adjpoll_clinton adjpoll_trump adjpoll_johnson adjpoll_mcmullin  d_hat X_hat  se_hat    lower  upper  error
## 1            45.2          41.7            4.63               NA 0.0400 0.520 0.02121 -0.00156 0.0816 0.0190
## 2            43.3          41.2            5.18               NA 0.0234 0.512 0.00613  0.01138 0.0354 0.0024
## 3            42.0          38.8            6.84               NA 0.0300 0.515 0.02133 -0.01182 0.0718 0.0090
## 4            45.7          40.9            6.07               NA 0.0400 0.520 0.01648  0.00770 0.0723 0.0190
## 5            46.8          42.3            3.73               NA 0.0400 0.520 0.00775  0.02482 0.0552 0.0190
## 6            49.0          44.0            3.06               NA 0.0400 0.520 0.02777 -0.01442 0.0944 0.0190</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="section-3-overview.html#cb89-1" aria-hidden="true"></a><span class="co"># Add variable called `error` to the object `polls` that contains the difference between d_hat and the actual difference on election day. Then make a plot of the error stratified by pollster, but only for pollsters who took 5 or more polls.</span></span>
<span id="cb89-2"><a href="section-3-overview.html#cb89-2" aria-hidden="true"></a>error &lt;-<span class="st"> </span>polls<span class="op">$</span>d_hat <span class="op">-</span><span class="st"> </span><span class="fl">0.021</span></span>
<span id="cb89-3"><a href="section-3-overview.html#cb89-3" aria-hidden="true"></a>polls &lt;-<span class="st"> </span><span class="kw">mutate</span>(polls, error)</span>
<span id="cb89-4"><a href="section-3-overview.html#cb89-4" aria-hidden="true"></a>polls <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(pollster) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">n</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">5</span>) </span></code></pre></div>
<pre><code>## # A tibble: 48 x 21
## # Groups:   pollster [7]
##    state startdate  enddate    pollster grade samplesize population rawpoll_clinton rawpoll_trump rawpoll_johnson rawpoll_mcmullin adjpoll_clinton adjpoll_trump adjpoll_johnson
##    &lt;fct&gt; &lt;date&gt;     &lt;date&gt;     &lt;fct&gt;    &lt;fct&gt;      &lt;int&gt; &lt;chr&gt;                &lt;dbl&gt;         &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt;           &lt;dbl&gt;         &lt;dbl&gt;           &lt;dbl&gt;
##  1 U.S.  2016-11-03 2016-11-06 ABC New… A+          2220 lv                    47            43               4                 NA            45.2          41.7            4.63
##  2 U.S.  2016-11-02 2016-11-06 Ipsos    A-          2195 lv                    42            39               6                 NA            42.0          38.8            6.84
##  3 U.S.  2016-11-04 2016-11-07 IBD/TIPP A-          1107 lv                    41.2          42.7             7.1               NA            42.9          42.2            6.32
##  4 U.S.  2016-11-05 2016-11-07 The Tim… &lt;NA&gt;        2521 lv                    45            40               5                 NA            45.1          42.3            3.68
##  5 U.S.  2016-11-01 2016-11-07 USC Dor… &lt;NA&gt;        2972 lv                    43.6          46.8            NA                 NA            45.3          43.4           NA   
##  6 U.S.  2016-10-31 2016-11-06 CVOTER … C+          1625 lv                    48.9          46.1            NA                 NA            47.0          42.0           NA   
##  7 U.S.  2016-11-02 2016-11-06 Rasmuss… C+          1500 lv                    45            43               4                 NA            45.6          43.1            4.42
##  8 U.S.  2016-11-02 2016-11-05 ABC New… A+          1937 lv                    47            43               4                 NA            45.3          41.8            4.64
##  9 U.S.  2016-10-31 2016-11-04 Ipsos    A-          2244 lv                    43            39               6                 NA            43.1          39.0            6.76
## 10 U.S.  2016-11-01 2016-11-04 ABC New… A+          1685 lv                    48            43               4                 NA            46.3          41.8            4.62
## # … with 38 more rows, and 7 more variables: adjpoll_mcmullin &lt;dbl&gt;, d_hat &lt;dbl&gt;, X_hat &lt;dbl&gt;, se_hat &lt;dbl&gt;, lower &lt;dbl&gt;, upper &lt;dbl&gt;, error &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="section-3-overview.html#cb91-1" aria-hidden="true"></a>polls <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> pollster, <span class="dt">y =</span> error)) <span class="op">+</span></span>
<span id="cb91-2"><a href="section-3-overview.html#cb91-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb91-3"><a href="section-3-overview.html#cb91-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="section-2-overview.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="section-4-overview.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
